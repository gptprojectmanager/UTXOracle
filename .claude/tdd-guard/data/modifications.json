{
  "session_id": "7ac84585-5b15-4f05-bec0-7868d8d5c600",
  "transcript_path": "/home/sam/.claude/projects/-media-sam-1TB-UTXOracle/7ac84585-5b15-4f05-bec0-7868d8d5c600.jsonl",
  "hook_event_name": "PreToolUse",
  "tool_name": "Write",
  "tool_input": {
    "file_path": "/tmp/test_websocket_client.py",
    "content": "#!/usr/bin/env python3\n\"\"\"\nQuick WebSocket client test for UTXOracle Live\n\"\"\"\nimport asyncio\nimport websockets\nimport json\nimport sys\n\nasync def test_websocket():\n    uri = \"ws://localhost:8000/ws/mempool\"\n    print(f\"üîå Connecting to {uri}...\", file=sys.stderr)\n\n    try:\n        async with websockets.connect(uri, open_timeout=5) as websocket:\n            print(\"‚úÖ WebSocket connected!\", file=sys.stderr)\n            print(\"üì° Waiting for messages (max 10 seconds)...\", file=sys.stderr)\n\n            # Wait for first message with timeout\n            try:\n                message = await asyncio.wait_for(websocket.recv(), timeout=10.0)\n                print(\"üì® Received message!\", file=sys.stderr)\n\n                # Parse and pretty-print JSON\n                data = json.loads(message)\n                print(json.dumps(data, indent=2))\n\n                return 0\n            except asyncio.TimeoutError:\n                print(\"‚è±Ô∏è  Timeout: No message received within 10 seconds\", file=sys.stderr)\n                print(\"‚ÑπÔ∏è  This might be normal if mempool analyzer hasn't sent updates yet\", file=sys.stderr)\n                return 1\n\n    except ConnectionRefusedError:\n        print(\"‚ùå Connection refused - is the server running?\", file=sys.stderr)\n        return 2\n    except Exception as e:\n        print(f\"‚ùå Error: {e}\", file=sys.stderr)\n        return 3\n\nif __name__ == \"__main__\":\n    exit_code = asyncio.run(test_websocket())\n    sys.exit(exit_code)\n"
  }
}